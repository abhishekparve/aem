(window.webpackJsonp=window.webpackJsonp||[]).push([[35],{1266:function(e,r,t){"use strict";t.r(r);var a=t(1),o=t.n(a),n=t(2),s=t.n(n),i=t(154),c=t(7),l=t(911),u=t(255),f=t(256),d=t(804),b=t(34),p=t(805),m=t(73),g=t(343),w=t(266),E=t(18),y=t(830);function O(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,a)}return t}function v(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?O(Object(t),!0).forEach((function(r){h(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):O(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function h(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var R=function(e){return{type:w.a,error:e}},P=function(e){return{type:w.d,error:e}},j=function(e){return function(r,t){return r({type:w.c}),Object(E.a)({url:e.url,method:e.method,data:v({},e.resetPasswordFormData)}).then((function(e){if(e.status>=200&&e.status<400){var a=t().aem.config.globalConfig.homePageUrl;return window.location.href=a,r((o=e.data,{type:w.b,response:o})),e.data}var o;return e.error?(r(R(e.error)),e.error):null})).catch((function(e){r(R(e.message))}))}};function _(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,a)}return t}function S(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?_(Object(t),!0).forEach((function(r){T(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):_(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function T(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function N(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var t=[],a=!0,o=!1,n=void 0;try{for(var s,i=e[Symbol.iterator]();!(a=(s=i.next()).done)&&(t.push(s.value),!r||t.length!==r);a=!0);}catch(e){o=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(o)throw n}}return t}(e,r)||function(e,r){if(!e)return;if("string"==typeof e)return D(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return D(e,r)}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function D(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,a=new Array(r);t<r;t++)a[t]=e[t];return a}var C=function(e){var r=e.submitResetPasswordDetails,t=e.redirectUrl,n=e.errorMsg,s=e.validatePasswordToken,i=Object(a.useContext)(u.a),m=Object(a.useContext)(f.a),g=N(Object(a.useState)(!1),2),w=g[0],E=g[1],y=N(Object(a.useState)(!0),2),O=y[0],v=y[1],h=N(Object(a.useState)(!1),2),R=h[0],P=h[1],j={firstNameValue:Object(l.a)("firstName"),lastNameValue:Object(l.a)("lastName"),token:Object(l.a)("token")},_=j.firstNameValue,T=j.lastNameValue,D=j.token;Object(a.useEffect)((function(){if(t&&(window.location=i.resetPasswordRedirectUrl),D){var e={};e.token=D,s(S(S({},m.validatePasswordToken),{},{reqObj:e}))}}),[]);var C={firstName:{labels:{id:"firstName"},config:{inputType:"hidden",visible:!0,tooltip:!1,validations:{required:!1}},value:_,error:""},lastName:{labels:{id:"lastName"},config:{inputType:"hidden",visible:!0,tooltip:!1,validations:{required:!1}},value:T,error:""},password:{labels:{id:"password",label:i.createPwdLabel,mandatoryError:i.passwordError,error:i.passwordPatternError,passwordFLNameError:i.passwordFLNameError,tooltipText:"",passwordRuleLabels:i.passwordRuleLabels},config:{passwordChecks:{lengthCheck:!1,letterCheck:!1,numberCheck:!1,symbolCheck:!1},visible:!0,inputType:"password",tooltip:!0,validations:{required:!0,regEx:"^(?=.*d)(?=.*[a-z])(?=.*[A-Z]).{7,}$",type:"password",passwordMatched:!1},widthModifier:"col__full"},value:"",error:""},confPassword:{labels:{id:"confPassword",label:i.confirmPwdLabel,mandatoryError:i.confPasswordError,error:i.confPasswordNotMatchError,tooltipText:""},config:{inputType:"password",visible:!0,tooltip:!1,validations:{required:!0,type:"confPassword",passwordMatched:!1},widthModifier:"col__full"},value:"",error:""}},k=N(Object(a.useState)(C),2),A=k[0],I=k[1],M=Object.values(A);Object(a.useEffect)((function(){c.get(i,"",!1)&&c.get(m,"",!1)&&(E(!0),v(!0))}),[i,m]);Object(a.useEffect)((function(){R&&v(Object.keys(A).some((function(e){var r=A[e].config.validations.required,t=A[e].value,a=A[e].error;return r&&!t||a})))}),[A,R]);return o.a.createElement(o.a.Fragment,null,w&&o.a.createElement("div",{className:"reset-password-page d-flex justify-content-center"},o.a.createElement("div",{className:"col-lg-4 col-md-6 col-sm-6 col-xs-12 mx-4"},o.a.createElement("h2",null,i.title),n&&o.a.createElement(p.a,{message:n,customClass:"custom-msg-block my-3"}),o.a.createElement("h4",{className:"my-4"},i.subTitle),o.a.createElement("form",{onSubmit:function(e){e.preventDefault();var t={};t.newPassword=A.password.value,t.token=D,r(S(S({},m.postResetPasswordPayload),{},{resetPasswordFormData:t}))}},o.a.createElement("div",{className:"reset-password-page__row col-lg__12-12  col-sm__12-12"},M.map((function(e){return o.a.createElement(d.a,{className:"sign-up-page__row-field",key:e.labels.id,inputType:e.config.inputType,widthModifier:e.config.widthModifier,labels:e.labels,config:e.config,value:e.value,error:e.error,visible:e.config.visible,handleOnBlur:function(r){return t=e.labels.id,a=S({},A),o=S({},a[t]),n=b.a(o,a),"confPassword"===t&&(o.config.validations.passwordMatched=!n.errorMsg),o.error=n.errorMsg,o.config.passwordChecks=S({},n.passwordChecks),a[t]=o,void I(a);var t,a,o,n},handleOnChange:function(r){!function(e,r){P(!0);var t=e.target.value,a=S({},A),o=S(S({},a[r]),{},{value:t}),n=b.a(o,a);o.error=n.errorMsg,o.config.passwordChecks=S({},n.passwordChecks),"confPassword"===r&&(o.config.validations.passwordMatched=!n.errorMsg),o.value=t,a[r]=o,I(a)}(r,e.labels.id)}})}))),o.a.createElement("div",{className:"reset-password-page__row-buttons"},o.a.createElement("button",{type:"submit",className:"btn btn-primary-blue btn-lg col__full",disabled:O},i.resetPasswordBtnLabel))))))};C.defaultProps={redirectUrl:!1,errorMsg:""},C.propTypes={submitResetPasswordDetails:s.a.func.isRequired,redirectUrl:s.a.bool,errorMsg:s.a.string,validatePasswordToken:s.a.func.isRequired};r.default=Object(i.b)((function(e){return{redirectUrl:e.resetPwd.redirectUrl,errorMsg:e.resetPwd.error}}),(function(e){return{submitResetPasswordDetails:function(r){return e(j(r))},validatePasswordToken:function(r){return e(function(e){return function(r,t){return Object(E.a)({url:e.url,method:e.method,data:v({},e.reqObj)}).then((function(e){if(e.status>=200&&e.status<400)return e.data;if(e.error){var a,o=e.error[0]&&e.error[0].errorCode?e.error[0]:{},n=o.errorCode,s=o.message;if(n===y.a.RESET_PASSWORD_TOKEN_EXPIRED||n===y.a.RESET_PASSWORD_INVALID_TOKEN){var i=t().aem.labels.errorMessages,l=t().aem.config.globalConfig.signInUrl,u=g.generateRandomCookie(),f=g.getSignInUrl(l,u,!0),d=c.get(i,n,s);a=Object(m.f)(d,"{signinLink}",f)}return r(P(a||e.error)),e.error}return null})).catch((function(e){r(P(e.message))}))}}(r))}}}))(C)},805:function(e,r,t){"use strict";var a=t(1),o=t.n(a),n=t(2),s=t.n(n),i=t(154),c=t(7),l=t(72),u=t.n(l),f=t(802),d=t.n(f),b=t(6);function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var m=function(e){var r=e.messageType,t=e.icon,a=e.altText,n=e.message,s=e.customClass,l=e.children,f=e.messageBlockRef,m=e.isIconAuthorable,g="ERROR"===r?"error-message":"info-message",w=Object(i.d)((function(e){return e.aem&&e.aem.labels&&e.aem.labels.errorMessages?e.aem.labels.errorMessages:{}})),E=c.get(w,b.a.DEFAULT_ERROR_MSG_CODE,b.a.DEFAULT_ERROR_MESSAGE),y=n&&"STRING"===p(n).toUpperCase(),O=m?t:"".concat("/etc.clientlibs/bdb-aem/clientlibs/clientlib-base/resources").concat(t),v=function(e,r){return o.a.createElement("div",{className:"message-block-container pt-2 ".concat(s),role:"alert",key:"message-".concat(r),ref:f},o.a.createElement("div",{className:u()("d-flex flex-row py-3 pl-3 m-0",g)},o.a.createElement("img",{src:O,alt:a}),o.a.createElement("p",{className:"pl-2"},d()(e)," ",l||null)))};return o.a.createElement(o.a.Fragment,null,y&&o.a.createElement(o.a.Fragment,null,v(n,0)),n&&n.length>0&&!y&&o.a.createElement(o.a.Fragment,null,n.map((function(e,r){return e.errorCode?v(c.get(w,e.errorCode,E),r):v(E,r)}))))};m.defaultProps={customClass:"",messageType:"ERROR",icon:"/icons/caution.svg",altText:"Error information icon",children:"",messageBlockRef:{},isIconAuthorable:!1},m.propTypes={messageType:s.a.string,icon:s.a.string,altText:s.a.string,message:s.a.any.isRequired,customClass:s.a.string,children:s.a.node,messageBlockRef:s.a.object,isIconAuthorable:s.a.bool},r.a=m},830:function(e,r,t){"use strict";r.a={EXCEL_INVALID_FORMAT:"DE405",EXCEL_INVALID_SHEETS:"DE406",DROPSHIP_ADDRESS_ERROR:"CE110",NO_GRANTS_ERROR_CODE:"GE4600",INVALID_GRANT_ERROR_CODE:"GE4601",INSUFFICIENT_GRANT_ERROR_CODE:"GE4603",EXCEEDED_MAX_LIMIT:"SC138",RESET_PASSWORD_INVALID_TOKEN:"AM800",RESET_PASSWORD_TOKEN_EXPIRED:"AM801"}},911:function(e,r,t){"use strict";t.d(r,"a",(function(){return a}));function a(e,r){r||(r=window.location.href),e=e.replace(/[\[\]]/g,"\\$&");var t=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)").exec(r);return!!t&&(!!t[2]&&decodeURIComponent(t[2].replace(/\+/g," ")))}}}]);
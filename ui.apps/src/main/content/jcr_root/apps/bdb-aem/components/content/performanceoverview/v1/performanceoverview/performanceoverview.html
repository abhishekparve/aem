<sly data-sly-use.templates="core/wcm/components/commons/v1/templates.html" />
<sly data-sly-call="${templates.placeholder @ isEmpty = !properties.type, classAppend='cmp-performance-overview'}"></sly>

<sly data-sly-use.PerformanceModel="com.bdb.aem.core.models.PerformanceModel"></sly>

<article class="instrument-performance app-js__instrument-performance ${properties.backgroundColor} ${properties.togglePaddingTop?'pt-2':''} ${properties.togglePaddingBottom?'pb-2':''}" id="${PerformanceModel.articleId}">
    <div class="bd-container">
        <div class="d-flex instrument-performance-title ">
            <div class="sitecontent">
                <p data-sly-test="${PerformanceModel.sectionTitle}" class="sitecontent__section-heading">${PerformanceModel.sectionTitle}</p>
				<h3 data-sly-test="${PerformanceModel.title}" class="sitecontent__title">${PerformanceModel.title @context='html'}</h3>
            </div>
        </div>
		
		<div class="instrument-performance-content-block">
			<sly data-sly-list.assets="${PerformanceModel.gridBeanList}" data-sly-test="${PerformanceModel.gridBeanList}" data-sly-unwrap> 
				<div class="d-flex instrument-performance-title ">
					<div class="sitecontent">
						<p class="sitecontent__sub-title">${assets.subTitle @context='html'}</p>
					</div>
				</div>
				<div class="d-flex flex-wrap instrument-performance__carousel bd-carousel">
					<sly data-sly-list.assets2="${assets.nestedDetails}" data-sly-test="${assets.nestedDetails}" data-sly-unwrap>
						<div class="instrument-performance-picture-tile d-flex flex-column justify-content-start align-items-center bd-rte"
							data-title="${assets2.modalHeading}" data-desc="${assets2.modalDescription}"
							data-src="${assets2.enlargedImagePath}" data-alt="${assets2.altImage}" data-size="${assets2.enlargeSize}">

							<div class="instrument-performance-picture-tile-image">
								<div class="d-flex align-items-center justify-content-center position-relative ">
									<picture>
										<source media="(max-width: 900px)" srcset=${assets2.image}
											onload="window.aos && window.aos.refresh()">
										<img data-src=${assets2.image} alt="${assets2.altImage}" onload="window.aos && window.aos.refresh()"
											onerror='this.onerror=null;this.src="/etc.clientlibs/bdb-aem/clientlibs/clientlib-base/resources/images/product-default.png";' class="lazy">
									</picture>
								</div>
								
								<!-- Trigger the modal and overlay -->
								<sly data-sly-test="${properties.modalImgFlag}">
									<div class="instrument-performance-picture-tile-overlay">
										<div class="instrument-performance-picture-tile-icon">
											<div class="d-flex align-items-center justify-content-center position-relative ">
												<sly data-sly-test="${assets2.magnifiyGlassColor == 'dark-blue'}">
												<picture>
													<source media="(max-width: 900px)"
															srcset=/etc.clientlibs/bdb-aem/clientlibs/clientlib-base/resources/icons/search-icon-M.svg  onload="window.aos && window.aos.refresh()">
													<img  src=/etc.clientlibs/bdb-aem/clientlibs/clientlib-base/resources/icons/Search-icon-new.svg
														  alt="performance1" onload="window.aos && window.aos.refresh()"
														  onerror='this.onerror=null;this.src="/etc.clientlibs/bdb-aem/clientlibs/clientlib-base/resources/icons/Search-icon-new.svg";'>
												</picture>
												</sly>
												
												<sly data-sly-test="${assets2.magnifiyGlassColor == 'white'}">
												<picture>
													<source media="(max-width: 900px)"
															srcset=/etc.clientlibs/bdb-aem/clientlibs/clientlib-base/resources/icons/icon_zoom_white-M.svg  onload="window.aos && window.aos.refresh()">
													<img  src=/etc.clientlibs/bdb-aem/clientlibs/clientlib-base/resources/icons/icon_zoom_white.svg
														  alt="performance1" onload="window.aos && window.aos.refresh()"
														  onerror='this.onerror=null;this.src="/etc.clientlibs/bdb-aem/clientlibs/clientlib-base/resources/icons/icon_zoom_white.svg";'>
												</picture>
												</sly>
												
											</div>
										</div>
									</div>
								</sly>
							</div>
							<div class="instrument-performance-picture-tile-details">
								<div class="instrument-performance-picture-tile-details-block">
									<div>${assets2.heading @context='html'}</div>
									<p>${assets2.description @context='html'}</p>
								</div>
							</div>
						</div>
					</sly>
				</div>
			</sly>
		</div>
		<sly data-sly-test="${properties.modalImgFlag}">
			<article class="dynamic-modal app-js__dynamic-modal">
				<div class="modal" id="instrument-performance-modal" tabindex="-1" role="dialog" aria-labelledby="dynamicModal"
					aria-hidden="true">
					<div class="modal-dialog modal-dialog-centered " role="document">
						<div class="modal-content">
							
							<div class="modal-header">
								<button type="button" class="close" data-dismiss="modal" aria-label="Close">
									<img src="/etc.clientlibs/bdb-aem/clientlibs/clientlib-base/resources/icons/modalClose.svg" alt="close" />
								</button>
							</div>

							<div class="modal-body">
								<div class="dynamic-modal__image-container">
									<img src="/etc.clientlibs/bdb-aem/clientlibs/clientlib-base/resources/icons/blankimage.png" alt="">
								</div>
								<div class="dynamic-modal__text-container">
									<div class="dynamic-modal__text-container_title bd-rte">
									</div>
									<div class="dynamic-modal__text-container_description bd-rte">
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</article>
		</sly>
    </div>
</article>
